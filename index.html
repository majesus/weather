<!DOCTYPE html>
<html lang="es">
<head>

    <!-- Iconos app -->
    <link rel="icon" sizes="192x192" href="icon-weather.png">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#000000">

    <link rel="manifest" href="manifest.webmanifest">
    <meta name="mobile-web-app-capable" content="yes">

    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
        overflow: hidden;
      }
    </style>



    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Clima España (Pro Version)</title>
    
    <!-- 1. Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 2. React y ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- 3. Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Estilos Globales -->
    <style>
        /* Ocultar Scrollbars pero mantener funcionalidad */
        html, body {
            overflow-x: hidden;
            overflow-y: auto;
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE/Edge */
            overscroll-behavior-y: none;
            -webkit-tap-highlight-color: transparent;
        }
        body::-webkit-scrollbar { display: none; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        @keyframes slow-spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
        .animate-slow-spin {
          animation: slow-spin 20s linear infinite;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-100 text-slate-800">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ICONOS SVG INTEGRADOS (Actualizados con Sunrise/Sunset) ---
        const IconBase = ({ children, className, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}>{children}</svg>
        );
        const Sun = (props) => (<IconBase {...props}><circle cx="12" cy="12" r="4"></circle><path d="M12 2v2"></path><path d="M12 20v2"></path><path d="m4.93 4.93 1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M2 12h2"></path><path d="M20 12h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m19.07 4.93-1.41 1.41"></path></IconBase>);
        const Cloud = (props) => (<IconBase {...props}><path d="M17.5 19c0-1.7-1.3-3-3-3h-1.1c-.1-2.9-2.4-5.2-5.3-5.3-2.7 0-5 2.2-5 4.9v.4C1.3 16.7 1.3 20 4.5 20H15c1.4 0 2.5-1.1 2.5-2.5Z"></path></IconBase>);
        const CloudRain = (props) => (<IconBase {...props}><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"></path><path d="M16 14v6"></path><path d="M8 14v6"></path><path d="M12 16v6"></path></IconBase>);
        const Wind = (props) => (<IconBase {...props}><path d="M17.7 7.7a2.5 2.5 0 1 1 1.8 4.3H2"></path><path d="M9.6 4.6A2 2 0 1 1 11 8H2"></path><path d="M12.6 19.4A2 2 0 1 0 14 16H2"></path></IconBase>);
        const Droplets = (props) => (<IconBase {...props}><path d="M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.8-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z"></path><path d="M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97"></path></IconBase>);
        const Thermometer = (props) => (<IconBase {...props}><path d="M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"></path></IconBase>);
        const MapPin = (props) => (<IconBase {...props}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path><circle cx="12" cy="10" r="3"></circle></IconBase>);
        const Clock = (props) => (<IconBase {...props}><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></IconBase>);
        const Calendar = (props) => (<IconBase {...props}><rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect><line x1="16" x2="16" y1="2" y2="6"></line><line x1="8" x2="8" y1="2" y2="6"></line><line x1="3" x2="21" y1="10" y2="10"></line></IconBase>);
        const Navigation = (props) => (<IconBase {...props}><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></IconBase>);
        const Eye = (props) => (<IconBase {...props}><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"></path><circle cx="12" cy="12" r="3"></circle></IconBase>);
        const Menu = (props) => (<IconBase {...props}><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></IconBase>);
        const AlertTriangle = (props) => (<IconBase {...props}><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path><line x1="12" x2="12" y1="9" y2="13"></line><line x1="12" x2="12.01" y1="17" y2="17"></line></IconBase>);
        const Sunrise = (props) => (<IconBase {...props}><path d="M12 2v8"></path><path d="m4.93 10.93 1.41 1.41"></path><path d="m19.07 10.93-1.41 1.41"></path><path d="M2 18h2"></path><path d="M20 18h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M12 18v4"></path><path d="m12 14-4 4"></path><path d="m12 14 4 4"></path></IconBase>);
        const Sunset = (props) => (<IconBase {...props}><path d="M12 2v8"></path><path d="m4.93 10.93 1.41 1.41"></path><path d="m19.07 10.93-1.41 1.41"></path><path d="M2 18h2"></path><path d="M20 18h2"></path><path d="m6.34 17.66-1.41 1.41"></path><path d="m17.66 17.66 1.41 1.41"></path><path d="M12 18v4"></path><path d="m8 18 4-4"></path><path d="m16 18-4-4"></path></IconBase>);

        // --- DATOS Y UTILIDADES ---
        const CITIES = [
            { name: 'Sevilla', region: 'Andalucía', lat: 37.3886, lon: -5.9823, aemetId: 'id41091', theme: 'from-[#FF9A9E] via-[#FECFEF] to-[#F6F9FC]' },
            { name: 'Cádiz', region: 'Andalucía', lat: 36.5267, lon: -6.2920, aemetId: 'id11012', theme: 'from-[#4FACFE] via-[#00F2FE] to-[#E0F7FA]' },
            { name: 'Badajoz', region: 'Extremadura', lat: 38.8778, lon: -6.9706, aemetId: 'id06015', theme: 'from-[#43e97b] via-[#38f9d7] to-[#e0f7fa]' }
        ];

        const GlassCard = ({ children, className = "" }) => (
            <div className={`backdrop-blur-xl bg-white/95 border border-white/40 shadow-xl rounded-3xl p-6 ${className}`}>
                {children}
            </div>
        );

        const getWeatherInfo = (code, isDay = 1) => {
            const codes = {
                0: { label: 'Despejado', icon: isDay ? 'sun' : 'moon' },
                1: { label: 'Mayormente despejado', icon: isDay ? 'sun' : 'moon' },
                2: { label: 'Parcialmente nublado', icon: 'cloud' },
                3: { label: 'Nublado', icon: 'cloud' },
                45: { label: 'Niebla', icon: 'cloud' },
                48: { label: 'Niebla con escarcha', icon: 'cloud' },
                51: { label: 'Llovizna ligera', icon: 'rain' },
                53: { label: 'Llovizna moderada', icon: 'rain' },
                55: { label: 'Llovizna densa', icon: 'rain' },
                61: { label: 'Lluvia leve', icon: 'rain' },
                63: { label: 'Lluvia moderada', icon: 'rain' },
                65: { label: 'Lluvia fuerte', icon: 'rain' },
                71: { label: 'Nieve ligera', icon: 'rain' },
                80: { label: 'Chubascos', icon: 'rain' },
                81: { label: 'Chubascos fuertes', icon: 'rain' },
                95: { label: 'Tormenta', icon: 'rain' },
            };
            return codes[code] || { label: 'Desconocido', icon: 'sun' };
        };

        const getUVLabel = (uv) => {
            if (uv <= 2) return { text: "Bajo", color: "text-green-500" };
            if (uv <= 5) return { text: "Moderado", color: "text-yellow-500" };
            if (uv <= 7) return { text: "Alto", color: "text-orange-500" };
            if (uv <= 10) return { text: "Muy Alto", color: "text-red-500" };
            return { text: "Extremo", color: "text-purple-500" };
        };

        const fetchRealWeatherData = async (lat, lon) => {
            try {
                // LLAMADA ACTUALIZADA: Incluye UV, Amanecer, Atardecer, Dirección viento
                const response = await fetch(
                    `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,relative_humidity_2m,apparent_temperature,is_day,precipitation,weather_code,wind_speed_10m,wind_direction_10m,surface_pressure,visibility&hourly=temperature_2m,weather_code,precipitation_probability,visibility&daily=weather_code,temperature_2m_max,temperature_2m_min,precipitation_probability_max,uv_index_max,sunrise,sunset&timezone=Europe%2FMadrid`
                );
                
                if (!response.ok) throw new Error("Error conectando al servicio meteorológico");
                const data = await response.json();
                
                const currentInfo = getWeatherInfo(data.current.weather_code, data.current.is_day);
                
                // Formateo de horas de sol (vienen como ISO 8601)
                const sunriseTime = new Date(data.daily.sunrise[0]).toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
                const sunsetTime = new Date(data.daily.sunset[0]).toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' });
                
                // Procesar horas
                const currentHourIndex = new Date().getHours();
                const hourlyData = [];
                for(let i = currentHourIndex; i < currentHourIndex + 24; i++) {
                    if(data.hourly.time[i]) {
                        const date = new Date(data.hourly.time[i]);
                        const hCode = data.hourly.weather_code[i];
                        const hHour = date.getHours();
                        const isHDay = (hHour > 7 && hHour < 21) ? 1 : 0;
                        hourlyData.push({
                            time: date.toLocaleTimeString('es-ES', { hour: '2-digit', minute: '2-digit' }),
                            temp: Math.round(data.hourly.temperature_2m[i]),
                            icon: getWeatherInfo(hCode, isHDay).icon,
                            precip: data.hourly.precipitation_probability[i] || 0
                        });
                    }
                }

                // Procesar días
                const dailyData = [];
                const dayNames = ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'];
                for(let i = 0; i < 7; i++) {
                    const date = new Date(data.daily.time[i]);
                    const dayName = i === 0 ? 'Hoy' : dayNames[date.getDay()]; 
                    dailyData.push({
                        name: dayName,
                        max: Math.round(data.daily.temperature_2m_max[i]),
                        min: Math.round(data.daily.temperature_2m_min[i]),
                        condition: getWeatherInfo(data.daily.weather_code[i], 1).icon,
                        precipProb: data.daily.precipitation_probability_max[i]
                    });
                }

                return {
                    current: {
                        temp: Math.round(data.current.temperature_2m),
                        condition: currentInfo.label,
                        iconType: currentInfo.icon,
                        feelsLike: Math.round(data.current.apparent_temperature),
                        humidity: data.current.relative_humidity_2m,
                        windSpeed: Math.round(data.current.wind_speed_10m),
                        windDir: data.current.wind_direction_10m, // Nuevo dato
                        visibility: data.current.visibility / 1000,
                        pressure: Math.round(data.current.surface_pressure),
                        uvIndex: data.daily.uv_index_max[0], // Nuevo dato
                        sunrise: sunriseTime, // Nuevo dato
                        sunset: sunsetTime, // Nuevo dato
                        description: `Actualmente ${currentInfo.label.toLowerCase()} con ${data.current.temperature_2m}°C.`
                    },
                    hourly: hourlyData,
                    daily: dailyData
                };
            } catch (err) {
                console.error(err);
                return null;
            }
        };

        const WeatherIcon = ({ type, className }) => {
            switch (type) {
                case 'sun': return <Sun className={`text-yellow-400 ${className}`} />;
                case 'moon': return <Sun className={`text-blue-200 ${className}`} />; 
                case 'rain': return <CloudRain className={`text-blue-400 ${className}`} />;
                case 'cloud': return <Cloud className={`text-gray-300 ${className}`} />;
                default: return <Sun className={`text-yellow-400 ${className}`} />;
            }
        };

        function App() {
            const [cityIndex, setCityIndex] = useState(0);
            const [loading, setLoading] = useState(true);
            const [data, setData] = useState(null);
            const [error, setError] = useState(false);
            const [animate, setAnimate] = useState(false);
            
            // --- GESTIÓN DE SWIPE ---
            const touchStartX = useRef(null);
            const touchEndX = useRef(null);
            const hourlyRef = useRef(null);
            const minSwipeDistance = 50;

            const onTouchStart = (e) => {
                // BLINDAJE: Protección de scroll horizontal
                if (hourlyRef.current && hourlyRef.current.contains(e.target)) {
                    touchStartX.current = null;
                    return;
                }
                touchEndX.current = null;
                touchStartX.current = e.targetTouches[0].clientX;
            };

            const onTouchMove = (e) => {
                if (touchStartX.current === null) return;
                touchEndX.current = e.targetTouches[0].clientX;
            };

            const onTouchEnd = () => {
                if (touchStartX.current === null || !touchEndX.current) return;
                
                const distance = touchStartX.current - touchEndX.current;
                const isLeftSwipe = distance > minSwipeDistance;
                const isRightSwipe = distance < -minSwipeDistance;

                if (isLeftSwipe) {
                    setCityIndex((prev) => (prev + 1) % CITIES.length);
                }
                if (isRightSwipe) {
                    setCityIndex((prev) => (prev - 1 + CITIES.length) % CITIES.length);
                }
                
                touchStartX.current = null;
                touchEndX.current = null;
            };

            const stopPropagation = (e) => e.stopPropagation();

            const activeCity = CITIES[cityIndex];

            const loadData = async () => {
                setLoading(true);
                setError(false);
                setAnimate(false);
                const weatherData = await fetchRealWeatherData(activeCity.lat, activeCity.lon);
                if (weatherData) {
                    setData(weatherData);
                    setLoading(false);
                    setTimeout(() => setAnimate(true), 100);
                } else {
                    setError(true);
                    setLoading(false);
                }
            };

            useEffect(() => {
                loadData();
            }, [cityIndex]);

            if (loading && !data) {
                return (
                    <div className={`min-h-screen bg-gradient-to-br ${activeCity.theme} flex items-center justify-center`}>
                        <div className="flex flex-col items-center gap-4">
                            <div className="w-16 h-16 border-4 border-white/30 border-t-white rounded-full animate-spin"></div>
                            <p className="text-white font-medium tracking-wider animate-pulse">CARGANDO...</p>
                        </div>
                    </div>
                );
            }

            if (error) {
                return (
                    <div className="min-h-screen bg-slate-800 flex items-center justify-center p-4">
                        <div className="bg-white/10 backdrop-blur-lg p-8 rounded-3xl text-center max-w-md border border-white/20">
                            <AlertTriangle size={48} className="text-red-400 mx-auto mb-4" />
                            <h2 className="text-white text-xl font-bold mb-2">Error de Conexión</h2>
                            <p className="text-slate-300 mb-6">No se pudieron obtener los datos.</p>
                            <button onClick={loadData} className="px-6 py-2 bg-pink-500 hover:bg-pink-600 text-white rounded-full font-bold transition-colors">Reintentar</button>
                        </div>
                    </div>
                );
            }

            const uvInfo = data ? getUVLabel(data.current.uvIndex) : { text: "", color: "" };

            return (
                <div 
                    onTouchStart={onTouchStart}
                    onTouchMove={onTouchMove}
                    onTouchEnd={onTouchEnd}
                    className={`min-h-screen w-full bg-gradient-to-br ${activeCity.theme} text-slate-800 font-sans selection:bg-pink-500 selection:text-white pb-10 transition-colors duration-1000 overflow-x-hidden`}
                >
                    {/* Background Decorativo */}
                    <div className="fixed inset-0 z-0 overflow-hidden pointer-events-none">
                        <div className="absolute -top-[20%] -left-[10%] w-[50%] h-[50%] bg-white/20 rounded-full blur-[100px] animate-pulse"></div>
                        <div className="absolute top-[40%] -right-[10%] w-[60%] h-[60%] bg-white/20 rounded-full blur-[100px]"></div>
                    </div>

                    <div className="relative z-10 max-w-4xl mx-auto px-4 pt-6">
                        
                        <header className="flex flex-col md:flex-row justify-between items-center mb-8 gap-4">
                            <div className="flex items-center gap-4 w-full md:w-auto">
                                <div className="p-2 bg-white/40 rounded-full backdrop-blur-md shadow-sm">
                                    <Menu size={20} className="text-slate-700" />
                                </div>
                                <div className="flex flex-col">
                                    <h1 className="text-xs font-bold tracking-widest text-slate-500 uppercase flex items-center gap-2">
                                        ESPAÑA <span className="text-slate-400">•</span> {activeCity.region.toUpperCase()}
                                    </h1>
                                    <div className="flex items-center gap-1 text-slate-800">
                                        <MapPin size={18} className="text-pink-600" />
                                        <span className="font-bold text-2xl">{activeCity.name}</span>
                                    </div>
                                </div>
                            </div>

                            <div className="flex items-center gap-2 bg-white/30 backdrop-blur-md px-4 py-2 rounded-full shadow-sm">
                                {CITIES.map((city, idx) => (
                                    <button
                                        key={idx}
                                        onClick={() => setCityIndex(idx)}
                                        className={`w-3 h-3 rounded-full transition-all duration-300 ${
                                            idx === cityIndex 
                                                ? "bg-slate-800 scale-125 w-6" 
                                                : "bg-slate-400/50 hover:bg-slate-600"
                                        }`}
                                    ></button>
                                ))}
                            </div>
                        </header>

                        <div key={activeCity.name} className="fade-in space-y-6">
                            
                            <div className={`transition-all duration-1000 transform ${animate ? 'translate-y-0 opacity-100' : 'translate-y-10 opacity-0'}`}>
                                <GlassCard className="flex flex-col md:flex-row items-center md:justify-between relative overflow-hidden group min-h-[300px]">
                                    <div className="flex flex-col z-10 w-full">
                                        <span className="inline-block self-start px-3 py-1 bg-slate-100 rounded-full text-xs font-bold text-slate-700 mb-2 border border-slate-200">AHORA</span>
                                        <h2 className="text-7xl md:text-8xl font-black text-slate-800 tracking-tighter">{data.current.temp}°</h2>
                                        <p className="text-xl text-slate-600 font-medium flex items-center gap-2 mt-2">
                                            {data.current.condition} • S.T. {data.current.feelsLike}°
                                        </p>
                                        <p className="text-slate-700 text-sm mt-4 max-w-sm leading-relaxed">{data.current.description}</p>
                                    </div>
                                    <div className="md:absolute md:right-0 md:top-1/2 md:-translate-y-1/2 p-8 opacity-100">
                                        <WeatherIcon type={data.current.iconType} className="w-[150px] h-[150px] md:w-[200px] md:h-[200px] animate-slow-spin drop-shadow-2xl" />
                                    </div>
                                </GlassCard>
                            </div>

                            {/* GRID DETALLES AMPLIADO */}
                            <div className={`grid grid-cols-2 gap-4 transition-all duration-1000 delay-100 transform ${animate ? 'translate-y-0 opacity-100' : 'translate-y-10 opacity-0'}`}>
                                
                                {/* 1. Viento con Dirección Rotativa */}
                                <GlassCard className="flex flex-col items-center justify-center p-4 relative overflow-hidden">
                                    <div className="flex items-center gap-2 mb-2">
                                        <Wind size={24} className="text-slate-500" />
                                        {/* Flecha de dirección del viento */}
                                        <Navigation 
                                            size={16} 
                                            className="text-pink-500 transition-transform duration-1000"
                                            style={{ transform: `rotate(${data.current.windDir}deg)` }}
                                        />
                                    </div>
                                    <span className="text-2xl font-bold">{data.current.windSpeed} <span className="text-xs font-normal">km/h</span></span>
                                    <span className="text-xs text-slate-500 uppercase font-bold">Viento</span>
                                </GlassCard>
                                
                                {/* 2. Humedad */}
                                <GlassCard className="flex flex-col items-center justify-center p-4">
                                    <Droplets size={24} className="text-blue-500 mb-2" />
                                    <span className="text-2xl font-bold">{data.current.humidity}%</span>
                                    <span className="text-xs text-slate-500 uppercase font-bold">Humedad</span>
                                </GlassCard>

                                {/* 3. UV Index (NUEVO) */}
                                <GlassCard className="flex flex-col items-center justify-center p-4">
                                    <Sun size={24} className="text-orange-500 mb-2" />
                                    <span className="text-2xl font-bold flex flex-col items-center leading-none">
                                        {data.current.uvIndex}
                                        <span className={`text-[10px] uppercase font-black ${uvInfo.color} mt-1`}>{uvInfo.text}</span>
                                    </span>
                                    <span className="text-xs text-slate-500 uppercase font-bold mt-1">Índice UV</span>
                                </GlassCard>

                                {/* 4. Sol / Amanecer (NUEVO) */}
                                <GlassCard className="flex flex-col items-center justify-center p-4">
                                    <div className="flex gap-4 items-center mb-1">
                                        <div className="flex flex-col items-center">
                                            <Sunrise size={16} className="text-orange-400 mb-1"/>
                                            <span className="text-xs font-bold text-slate-700">{data.current.sunrise}</span>
                                        </div>
                                        <div className="w-[1px] h-8 bg-slate-200"></div>
                                        <div className="flex flex-col items-center">
                                            <Sunset size={16} className="text-purple-400 mb-1"/>
                                            <span className="text-xs font-bold text-slate-700">{data.current.sunset}</span>
                                        </div>
                                    </div>
                                    <span className="text-xs text-slate-500 uppercase font-bold mt-1">Sol</span>
                                </GlassCard>
                                
                                {/* 5. Visibilidad */}
                                <GlassCard className="flex flex-col items-center justify-center p-4">
                                    <Eye size={24} className="text-purple-500 mb-2" />
                                    <span className="text-2xl font-bold">{data.current.visibility} <span className="text-xs font-normal">km</span></span>
                                    <span className="text-xs text-slate-500 uppercase font-bold">Visibilidad</span>
                                </GlassCard>
                                
                                {/* 6. Presión */}
                                <GlassCard className="flex flex-col items-center justify-center p-4">
                                    <Thermometer size={24} className="text-red-400 mb-2" />
                                    <span className="text-2xl font-bold">{data.current.pressure} <span className="text-xs font-normal">hPa</span></span>
                                    <span className="text-xs text-slate-500 uppercase font-bold">Presión</span>
                                </GlassCard>

                            </div>

                            {/* POR HORAS - PROTEGIDO */}
                            <div className={`transition-all duration-1000 delay-200 transform ${animate ? 'translate-y-0 opacity-100' : 'translate-y-10 opacity-0'}`}>
                                <GlassCard className="!p-0 overflow-hidden">
                                    <div className="px-6 py-4 border-b border-slate-100">
                                        <h3 className="font-bold text-slate-800 flex items-center gap-2"><Clock size={18} className="text-pink-500"/> Por horas</h3>
                                    </div>
                                    <div 
                                        ref={hourlyRef}
                                        className="overflow-x-auto pb-6 pt-4 px-6 hide-scrollbar flex gap-6"
                                        onTouchStart={stopPropagation}
                                        onTouchMove={stopPropagation}
                                        onTouchEnd={stopPropagation}
                                    >
                                        {data.hourly.map((hour, idx) => (
                                            <div key={idx} className="flex flex-col items-center gap-2 min-w-[60px]">
                                                <span className="text-xs font-bold text-slate-500">{hour.time}</span>
                                                <WeatherIcon type={hour.icon} size={24} className="my-1" />
                                                <span className="font-bold text-lg">{hour.temp}°</span>
                                                {hour.precip > 0 && <span className="text-[10px] font-bold text-blue-500">{hour.precip}%</span>}
                                            </div>
                                        ))}
                                    </div>
                                </GlassCard>
                            </div>

                            {/* 7 DÍAS */}
                            <div className={`transition-all duration-1000 delay-300 transform ${animate ? 'translate-y-0 opacity-100' : 'translate-y-10 opacity-0'}`}>
                                <GlassCard className="!p-0">
                                    <div className="px-6 py-4 border-b border-slate-100">
                                        <h3 className="font-bold text-slate-800 flex items-center gap-2"><Calendar size={18} className="text-pink-500"/> Próximos días</h3>
                                    </div>
                                    <div className="divide-y divide-slate-100">
                                        {data.daily.map((day, idx) => (
                                            <div key={idx} className="flex items-center justify-between p-4 hover:bg-slate-50 transition-colors">
                                                <div className="w-20 font-bold text-slate-700">{day.name}</div>
                                                <WeatherIcon type={day.condition} className="w-6 h-6 mx-auto" />
                                                <div className="flex gap-4 w-20 justify-end">
                                                    <span className="font-bold">{day.max}°</span>
                                                    <span className="text-slate-500">{day.min}°</span>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </GlassCard>
                            </div>

                        </div>

                        <footer className="mt-12 mb-8 text-center text-slate-500 text-xs">
                            <p>Desliza ← → para cambiar de ciudad</p>
                            <p className="mt-2 opacity-50">Datos Open-Meteo • Diseño App Nativa</p>
                        </footer>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
